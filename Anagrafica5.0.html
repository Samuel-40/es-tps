<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Anagrafica Utente</title>
</head>
<body>
  <h2>Inserisci Anagrafica Utente</h2>
  <form id="anagraficaForm">
    <label>Nome:
      <input type="text" id="nome" required>
    </label><br><br>

    <label>Cognome:
      <input type="text" id="cognome" required>
    </label><br><br>

    <label>Sesso:</label><br>
    <input type="radio" name="sesso" id="sessoM" value="maschio">
    <label for="sessoM">Maschio</label><br>
    <input type="radio" name="sesso" id="sessoF" value="femmina">
    <label for="sessoF">Femmina</label><br>
    <input type="radio" name="sesso" id="sessoAltro" value="altro">
    <label for="sessoAltro">Altro</label><br><br>

    <label>Indirizzo:
      <input type="text" id="indirizzo" required>
    </label><br><br>

    <input type="checkbox" id="auto" value="auto">
    <label for="auto">Ho un'auto</label><br>
    <input type="checkbox" id="bici" value="bici">
    <label for="bici">Ho una bici</label><br>
    <input type="checkbox" id="cavallo" value="cavallo">
    <label for="cavallo">Ho un cavallo</label><br><br>

    <label>Provincia:
      <select id="provincia">
        <option value="milano">Milano</option>
        <option value="torino">Torino</option>
        <option value="napoli">Napoli</option>
      </select>
    </label><br><br>

    <label>Materie preferite:
      <select name="materie_preferite" id="materie" multiple>
        <option value="matematica">Matematica</option>
        <option value="inglese">Inglese</option>
        <option value="storia">Storia</option>
      </select>
    </label><br><br>

    <label>Citt√†:
      <input type="text" id="citta" required>
    </label><br><br>

    <label>CAP:
      <input type="text" id="cap" required>
    </label><br><br>

    <label>Data di nascita:
      <input type="date" id="dataNascita" required>
    </label><br><br>

    <button type="button" onclick="mostraRisultato()">Invia</button>
    <a href="anagrafica5.html">Vai a stampa</a>
  </form>

  <script>
    let ele = JSON.parse(localStorage.getItem("elenco")) || [];

    function getGenerazione(anno) {
      if (anno >= 2013) return "Generazione Alpha";
      else if (anno >= 1997) return "Generazione Z";
      else if (anno >= 1981) return "Millennials";
      else if (anno >= 1965) return "Generazione X";
      else if (anno >= 1946) return "Baby Boomers";
      else if (anno >= 1928) return "Generazione Silenziosa";
      else if (anno >= 1901) return "Greatest Generation";
      else return "Generazione non definita";
    }

    function mostraRisultato() {
      let persona = {
        nome: document.getElementById("nome").value,
        cognome: document.getElementById("cognome").value,
        citta: document.getElementById("citta").value,
        cap: document.getElementById("cap").value,
        dataNascita: document.getElementById("dataNascita").value,
        sesso: (document.getElementById("sessoM").checked ? "Maschio" :
                document.getElementById("sessoF").checked ? "Femmina" :
                document.getElementById("sessoAltro").checked ? "Altro" : "N/D"),
        mezzi: [
          ...(document.getElementById("auto").checked ? ["Auto"] : []),
          ...(document.getElementById("bici").checked ? ["Bici"] : []),
          ...(document.getElementById("cavallo").checked ? ["Cavallo"] : [])
        ],
        provincia: document.getElementById("provincia").value,
        materie: Array.from(document.getElementById("materie").selectedOptions).map(opt => opt.value)
      };

      let anno = new Date(persona.dataNascita).getFullYear();
      let oggi = new Date().getFullYear();
      persona.eta = oggi - anno;
      persona.generazione = getGenerazione(anno);

      ele.push(persona);
      localStorage.setItem("elenco", JSON.stringify(ele));

      alert("Dati salvati correttamente!");
      document.getElementById("anagraficaForm").reset();
    }
  </script>
</body>
</html>

