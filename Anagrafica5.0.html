<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Gestione Utenti</title>
    <style>
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
            padding: 5px;
        }
    </style>
</head>
<body>

<h2>Inserisci dati utente</h2>

Nome: <input type="text" id="nome"><br><br>
Cognome: <input type="text" id="cognome"><br><br>
Età: <input type="number" id="eta"><br><br>

<button onclick="inserisci()">Salva</button>

<h2>Dati salvati</h2>

<table id="tabella">
    <tr>
        <th>Nome</th>
        <th>Cognome</th>
        <th>Età</th>
    </tr>
</table>

<script>
    // array globale
    let ele = [];

    // se ci sono già dati nel localStorage li carico
    if(localStorage.getItem("elenco") != null){
        ele = JSON.parse(localStorage.getItem("elenco"));
        aggiornaTabella();
    }

    function inserisci(){
        let n = document.getElementById("nome").value;
        let c = document.getElementById("cognome").value;
        let e = document.getElementById("eta").value;

        if(n=="" || c=="" || e==""){
            alert("Compila tutti i campi!");
            return;
        }

        // creo oggetto persona
        const persona = {
            nome: n,
            cognome: c,
            eta: e
        };

        // aggiungo a collection
        ele.push(persona);

        // salvo su localStorage
        localStorage.setItem("elenco", JSON.stringify(ele));

        // aggiorno la tabella
        aggiornaTabella();

        // svuoto input
        document.getElementById("nome").value = "";
        document.getElementById("cognome").value = "";
        document.getElementById("eta").value = "";
    }

    function aggiornaTabella(){
        let tab = document.getElementById("tabella");

        // cancello tutte le righe tranne l'intestazione
        tab.innerHTML = `
        <tr>
            <th>Nome</th>
            <th>Cognome</th>
            <th>Età</th>
        </tr>`;

        // creo le righe con i dati
        for(let i=0; i<ele.length; i++){
            let tr = document.createElement("tr");

            let tdNome = document.createElement("td");
            tdNome.textContent = ele[i].nome;

            let tdCognome = document.createElement("td");
            tdCognome.textContent = ele[i].cognome;

            let tdEta = document.createElement("td");
            tdEta.textContent = ele[i].eta;

            tr.appendChild(tdNome);
            tr.appendChild(tdCognome);
            tr.appendChild(tdEta);

            tab.appendChild(tr);
        }
    }
</script>

</body>
</html>
