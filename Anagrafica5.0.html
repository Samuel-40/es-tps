<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Anagrafica Utente</title>
</head>
<body>
  <h2>Inserisci Anagrafica Utente</h2>
  <form id="anagraficaForm">
    <label>Nome:
      <input type="text" id="nome" required>
    </label>

    <label>Cognome:
      <input type="text" id="cognome" required>
    </label>
    <label>sesso:</label><br>
        <input type="radio" name="sesso" value="maschio">
  <label for="rosso">maschio</label><br>
        <input type="radio" name="sesso" value="femmina">
  <label for="verde">femmina</label><br>
        <input type="radio" name="sesso" value="altro">
  <label for="blu">altro</label><br>
    <label>Indirizzo:
      <input type="text" id="indirizzo" required>
    </label>
<input type="checkbox" id="box1" name="auto" value="auto" onclick="onClickHandler(document.getElementById('box1').value)">
<label for="vehicle1"> ho un auto</label>
<input type="checkbox" id="box2" name="bici" value="bici" onclick="onClickHandler(document.getElementById('box2').value)">
<label for="vehicle2"> ho una bici</label>
<input type="checkbox" id="box3" name="cavallo" value="cavallo" onclick="onClickHandler(document.getElementById('box3').value)">
<label for="vehicle3"> ho un cavallo</label>
<select name="provincia">
    <option value="milano">milano</option>
    <option value="torino">torino</option>
    <option value="napoli">napoli</option>
    
</select>
<select name="materie_preferite" id="materie" multiple>
        <option value="matematica">Matematica</option>
        <option value="inglese">inglese</option>
        <option value="storia">Storia</option>
    </select>
    <label>Citt√†:
      <input type="text" id="citta" required>
    </label>

    <label>CAP:
      <input type="text" id="cap" required>
    </label>

    <label>Data di nascita:
      <input type="date" id="dataNascita" required>
    </label>
<!-- richiamo funzione calcolaGenerazione-->
    <button type="button" onclick="calcolaGenerazione()">Invia</button>
  </form>

  <div class="output" id="risultato"></div>

  <script>
    function calcolaGenerazione() {
      nome = document.getElementById('nome').value;
      cognome = document.getElementById('cognome').value;
      indirizzo = document.getElementById('indirizzo').value;
      citta = document.getElementById('citta').value;
      cap = document.getElementById('cap').value;
      dataNascita = document.getElementById('dataNascita').value;
      sesso = document.querySelector('input[name="sesso"]:checked');
      sessosel=sesso.value;
      mezzo = document.querySelectorAll('input[type="checkbox"]:checked');
      let mezziSelezionati = [];
      mezzo.forEach(checkbox => {
      mezziSelezionati.push(checkbox.value);
      });
      let outputMezzi = mezziSelezionati.join();
      provincia=document.querySelector('select[name="provincia"]').value;
             
annoNascita = new Date(dataNascita).getFullYear(); 
      eta = new Date().getFullYear() - annoNascita; 

      generazione = '';
      
      switch(true){
        case annoNascita >= 2013:
          generazione = 'Generazione Alpha';
          break;
        case annoNascita >= 1997:
          generazione = 'Generazione Z';
          break;
        case annoNascita >= 1981:
          generazione = 'Millennials';
          break;
        case annoNascita >= 1965:
          generazione = 'Generazione X';
          break;
        case annoNascita >= 1946:
          generazione = 'Baby Boomers';
          break;
        case annoNascita >= 1928:
          generazione = 'Generazione Silenziosa';
          break;

        case annoNascita >= 1908:
          generazione = 'Greatest Generation';
          break;
        default:
          generazione = 'Pre-1908 (non classificata)';
        break
      }

      document.getElementById('outnome').innerHTML= nome;
      document.getElementById('outcognome').innerHTML= cognome;
      document.getElementById('outindirizzo').innerHTML= indirizzo;
      document.getElementById('outcitta').innerHTML= citta;
      document.getElementById('outcap').innerHTML= cap;
      document.getElementById('outdatanascita').innerHTML= dataNascita;
      document.getElementById('outsesso').innerHTML= sessosel;
      document.getElementById('outprovincia').innerHTML=provincia;
      document.getElementById('outmezzi').innerHTML=outputMezzi;
    }
  </script>
  <div id="outnome"></div>
  <div id="outcognome"></div>
  <div id="outindirizzo"></div>
  <div id="outcitta"></div>
  <div id="outcap"></div>
  <div id="outdatanascita"></div>
  <div id="outsesso"></div>
  <div id="outmezzi"></div>
    <div id="outprovincia"></div>
<a href="anagrafica5.html">Stampa</a>

<script>
let ele = JSON.parse(localStorage.getItem("elenco")) || [];

function getGenerazione(anno) {
if (anno >= 2013) return "Generazione Alpha";
else if (anno >= 1997) return "Generazione Z";
else if (anno >= 1981) return "Millennials";
else if (anno >= 1965) return "Generazione X";
else if (anno >= 1946) return "Baby Boomers";
else if (anno >= 1928) return "Generazione Silenziosa";
else if (anno >= 1901) return "Greatest Generation";
else return "Generazione non definita";
}

function mostraRisultato() {
let persona = {
nome: document.getElementById("nome").value,
cognome: document.getElementById("cognome").value,
citta: document.getElementById("citta").value,
cap: document.getElementById("cap").value,
dataNascita: document.getElementById("dataNascita").value,

sesso: (function(){
if (document.getElementById("sessoM").checked) return "Maschio";
if (document.getElementById("sessoF").checked) return "Femmina";
if (document.getElementById("sessoAltro").checked) return "Altro";
return "N/D";
})(),

mezzi: (function(){
let m = [];
if (document.getElementById("auto").checked) m.push("Auto");
if (document.getElementById("moto").checked) m.push("Moto");
if (document.getElementById("bici").checked) m.push("Bici");
if (document.getElementById("cavallo").checked) m.push("Cavallo");
if (document.getElementById("deltaplano").checked) m.push("Deltaplano");
return m;
})(),

provincia: document.getElementById("provincia").value,

materie: (function(){
let lista = [];
let opzioni = document.getElementById("materie").options;
for (let i = 0; i < opzioni.length; i++) {
if (opzioni[i].selected) lista.push(opzioni[i].value);
}
return lista;
}
         )()
};

let anno = new Date(persona.dataNascita).getFullYear();
let oggi = new Date().getFullYear();
persona.eta = oggi - anno;
persona.generazione = getGenerazione(anno);

ele.push(persona);
localStorage.setItem("elenco", JSON.stringify(ele));
}
</script>
</body>
</html>
