<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Anagrafica 5.0</title>
</head>
<body>

<h2>Anagrafica5.0</h2>

Nome: <input type="text" id="nome"><br><br>
Cognome: <input type="text" id="cognome"><br><br>
Citt√†: <input type="text" id="citta"><br><br>
CAP: <input type="text" id="cap"><br><br>
Data di nascita: <input type="date" id="dataNascita"><br><br>

Sesso:<br>
<input type="radio" id="sessoM" name="sesso"> Maschio<br>
<input type="radio" id="sessoF" name="sesso"> Femmina<br>
<input type="radio" id="sessoAltro" name="sesso"> Altro<br><br>

Mezzi posseduti:<br>
<input type="checkbox" id="auto"> Auto
<input type="checkbox" id="moto"> Moto
<input type="checkbox" id="bici"> Bici
<input type="checkbox" id="cavallo"> Cavallo
<input type="checkbox" id="deltaplano"> Deltaplano<br><br>

Provincia:
<select id="provincia">
<option value="MI">Milano</option>
<option value="VA">Varese</option>
<option value="NA">Napoli</option>
<option value="TO">Torino</option>
<option value="FI">Firenze</option>
</select><br><br>

Materie preferite:<br>
<select id="materie" multiple size="5">
<option value="Italiano">Italiano</option>
<option value="Storia">Storia</option>
<option value="Matematica">Matematica</option>
<option value="TPSIT">TPSIT</option>
<option value="Inglese">Inglese</option>
</select><br><br>

<button onclick="mostraRisultato()">Invia</button>

<br><br>
<a href="stampa.html">Stampa</a>

<script>

let ele = JSON.parse(localStorage.getItem("elenco"));

function getGenerazione(anno) {
if (anno >= 2013) return "Generazione Alpha";
else if (anno >= 1997) return "Generazione Z";
else if (anno >= 1981) return "Millennials";
else if (anno >= 1965) return "Generazione X";
else if (anno >= 1946) return "Baby Boomers";
else if (anno >= 1928) return "Generazione Silenziosa";
else if (anno >= 1901) return "Greatest Generation";
else return "Generazione non definita";
}

function mostraRisultato() {

let nome = document.getElementById("nome").value;
let cognome = document.getElementById("cognome").value;
let citta = document.getElementById("citta").value;
let cap = document.getElementById("cap").value;
let dataNascita = document.getElementById("dataNascita").value;

let sesso = "N/D";
if (document.getElementById("sessoM").checked) sesso = "Maschio";
if (document.getElementById("sessoF").checked) sesso = "Femmina";
if (document.getElementById("sessoAltro").checked) sesso = "Altro";

let mezzi = [];
if (document.getElementById("auto").checked) mezzi.push("Auto");
if (document.getElementById("moto").checked) mezzi.push("Moto");
if (document.getElementById("bici").checked) mezzi.push("Bici");
if (document.getElementById("cavallo").checked) mezzi.push("Cavallo");
if (document.getElementById("deltaplano").checked) mezzi.push("Deltaplano");

let provincia = document.getElementById("provincia").value;

let materie = [];
let opzioni = document.getElementById("materie").options;
for (let i = 0; i < opzioni.length; i++) {
if (opzioni[i].selected) materie.push(opzioni[i].value);
}

let anno = new Date(dataNascita).getFullYear();
let oggi = new Date().getFullYear();
let eta = oggi - anno;
let generazione = getGenerazione(anno);

let persona = {
nome: nome,
cognome: cognome,
citta: citta,
cap: cap,
dataNascita: dataNascita,
sesso: sesso,
mezzi: mezzi,
provincia: provincia,
materie: materie,
eta: eta,
generazione: generazione
};

ele.push(persona);
localStorage.setItem("elenco", JSON.stringify(ele))

}

</script>

</body>
</html>
