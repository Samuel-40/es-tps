<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Anagrafica Utente</title>
</head>
<body>
  <h2>Inserisci Anagrafica Utente</h2>
  <form id="anagraficaForm">
    <label>Nome:
      <input type="text" id="nome" required>
    </label>

    <label>Cognome:
      <input type="text" id="cognome" required>
    </label>

    <label>sesso:</label>
    <input type="radio" name="sesso" value="maschio">
    <label>maschio</label>
    <input type="radio" name="sesso" value="femmina">
    <label>femmina</label>
    <input type="radio" name="sesso" value="altro">
    <label>altro</label>

    <label>Indirizzo:
      <input type="text" id="indirizzo" required>
    </label>

    <input type="checkbox" id="box1" name="auto" value="auto">
    <label> ho un auto</label>
    <input type="checkbox" id="box2" name="bici" value="bici">
    <label> ho una bici</label>
    <input type="checkbox" id="box3" name="cavallo" value="cavallo">
    <label> ho un cavallo</label>

    <select name="provincia">
      <option value="milano">milano</option>
      <option value="torino">torino</option>
      <option value="napoli">napoli</option>
    </select>

    <select name="materie_preferite" id="materie" multiple>
      <option value="matematica">Matematica</option>
      <option value="inglese">inglese</option>
      <option value="storia">Storia</option>
    </select>

    <label>Citt√†:
      <input type="text" id="citta" required>
    </label>

    <label>CAP:
      <input type="text" id="cap" required>
    </label>

    <label>Data di nascita:
      <input type="date" id="dataNascita" required>
    </label>

    <button type="button" onclick="calcolaGenerazione()">Invia</button>
  </form>

  <div class="output" id="risultato"></div>

  <script>
    function calcolaGenerazione() {
      let nome = document.getElementById('nome').value;
      let cognome = document.getElementById('cognome').value;
      let indirizzo = document.getElementById('indirizzo').value;
      let citta = document.getElementById('citta').value;
      let cap = document.getElementById('cap').value;
      let dataNascita = document.getElementById('dataNascita').value;
      let sesso = document.querySelector('input[name="sesso"]:checked');
      let sessosel = sesso ? sesso.value : "";

      let mezzo = document.querySelectorAll('input[type="checkbox"]:checked');
      let mezziSelezionati = [];
      mezzo.forEach(cb => mezziSelezionati.push(cb.value));

      let provincia = document.querySelector('select[name="provincia"]').value;

      // ===== SALVATAGGIO SU localStorage =====
      let persona = {
        nome: nome,
        cognome: cognome,
        sesso: sessosel,
        indirizzo: indirizzo,
        citta: citta,
        cap: cap,
        dataNascita: dataNascita,
        provincia: provincia,
        mezzi: mezziSelezionati
      };

      let anagrafica = JSON.parse(localStorage.getItem("anagrafica")) || [];
      anagrafica.push(persona);
      localStorage.setItem("anagrafica", JSON.stringify(anagrafica));

      // Puoi rimandare alla pagina stampa
      window.location.href = "stampa.html";
    }
  </script>
</body>
</html>
